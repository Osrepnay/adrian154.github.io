<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Math Thing</title>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
        <script type="text/x-mathjax-config">
            MathJax.Hub.Config({displayAlign: "left"});
        </script>
    </head>
    <body>
        
        <p>This page displays its contents with <a href="https://www.mathjax.org/">MathJax</a>. Go check it out!</p>
        <textarea rows="10" cols="80" placeholder="Math goes here..." id="input"></textarea><br><br>
        <input type="text" id="urlOut" readonly> <button>Copy to Clipboard</button>
        <button onclick="update()">Update</button>
        <p id="preview"></p>

        <script>
            let preview = document.getElementById("preview");
            let input = document.getElementById("input");
            let output = document.getElementById("urlOut");
            let url = new URL(window.location.href);
            const update = function() {
                preview.innerHTML = input.value;
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
                url.pathname = "/math.html";
                url.searchParams.set("math", input.value);
                output.value = url;
            };
        </script>
    </body>
</html>