<html>
    <head>
        <title>Text Stuff</title>
    </head>
    <body>
        <script>
const buildDictionary = function(data, options) {

    // Defaults
    if(options === undefined) {
        options = {
            keyLength: 3,
            valueLength: 3
        };
    }

    if(typeof data === "string") {
        data = [data];
    }

    // Build
    let dictionary = {keyLength: options.keyLength, valueLength: options.valueLength, data: {}};
    for(let datum of data) {
        for(let i = 0; i < datum.length - (options.keyLength + options.valueLength); i++) {
            let key = datum.substring(i, i + options.keyLength);
            let value = datum.substring(i + options.keyLength, i + options.keyLength + options.valueLength);
            if(dictionary.data.hasOwnProperty(key)) {
                dictionary.data[key].push(value);
            } else {
                dictionary.data[key] = [value];
            }
        }
    }

    return dictionary;

};

const pickRandom = arr => arr[Math.floor(arr.length * Math.random())];

// Generate random key
const generateSeed = function(dictionary) {
    return pickRandom(Object.keys(dictionary.data));
};

const generateText = function(dictionary, seed, maxIterations) {

    let result = seed;

    for(let i = 0; i < maxIterations; i++) {
        let key = result.substring(result.length - dictionary.keyLength);
        let values = dictionary.data[key];
        if(values !== undefined && values.length > 0) {
            result += pickRandom(dictionary.data[key]);
        } else {
            return result;
        }
    }

    return result;

};

let dict = buildDictionary("Lorem ipsum dolor sit amet, consectetur adipiscing elit.", {
    keyLength: 1,
    valueLength: 2
});

console.log(dict);

console.log(generateText(dict, generateSeed(dict), 1000));
        </script>
    </body>
</html>
